<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V âœ… Estudos â€” Cronograma Inteligente</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f0f0f">

<style>
  :root {
    --bg1: #0f0f0f;
    --bg2: #1f1f1f;
    --card: rgba(38, 38, 38, 0.85);
    --border: #333;
    --accent: #6ea8fe;
    --muted: #b9c0c7;
    --ok: #4cd37b;
    --warn: #f6c453;
    --danger: #ff6b6b;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    color: #f2f5f9;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }

  header {
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    background: rgba(15, 15, 15, 0.9);
    backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  h1 {
    margin: 0;
    font-size: 18px;
  }

  .muted { color: var(--muted); font-size: 13px; }

  button {
    background: #2b2b2b;
    color: #f2f5f9;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px 12px;
    cursor: pointer;
    transition: 0.3s;
  }

  button.primary {
    background: var(--accent);
    color: #0b1220;
    font-weight: 600;
  }

  button.small {
    font-size: 13px;
    padding: 6px 10px;
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .container {
    max-width: 980px;
    margin: 14px auto;
    padding: 0 12px;
  }

  .grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 14px;
  }

  @media (max-width: 900px) {
    .grid { grid-template-columns: 1fr; }
  }

  .row { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  th, td {
    padding: 8px;
    border-bottom: 1px solid var(--border);
    text-align: left;
  }

  .pill {
    padding: 6px 10px;
    border-radius: 999px;
    background: #1f1f1f;
    border: 1px solid var(--border);
    font-size: 12px;
  }

  .ok { color: var(--ok); }
  .warn { color: var(--warn); }
  .danger { color: var(--danger); }
</style>
</head>

<body>
<header>
  <div>
    <h1>V âœ… Estudos â€” Cronograma Inteligente</h1>
    <div class="muted">PWA â€” funciona offline â€¢ Planeje, acompanhe e revise</div>
  </div>
  <button id="btnRefresh" class="primary small">ðŸ”„ Atualizar app</button>
</header>

<div class="container grid">
  <main>
    <div class="card">
      <h3>Gerador do Dia</h3>
      <div class="row">
        <div style="flex:1">
          <label>Data da prova</label>
          <input type="date" id="examDate">
        </div>
        <div style="width:160px">
          <label>Temas por dia</label>
          <input type="number" id="perDay" min="1" max="10" value="2">
        </div>
      </div>
      <div class="row" style="margin-top:8px">
        <button id="btnGenerate" class="primary small">Gerar plano de hoje</button>
        <button id="btnClearToday" class="small">Limpar seleÃ§Ã£o</button>
      </div>
      <div id="summary" class="row" style="margin-top:8px"></div>
      <hr>
      <div id="todayList"></div>
    </div>

    <div class="card" style="margin-top:12px">
      <h3>Temas cadastrados</h3>
      <table>
        <thead><tr><th>Tema</th><th>Prioridade</th><th>Dificuldade</th><th>Status</th><th>Acertos/Erros</th><th>Data</th><th>AÃ§Ãµes</th></tr></thead>
        <tbody id="themesTable"></tbody>
      </table>
    </div>
  </main>

  <aside>
    <div class="card">
      <h3>Adicionar tema</h3>
      <label>Tema</label>
      <input id="tema" placeholder="Ex: FasceÃ­te plantar">
      <label>Prioridade</label>
      <select id="prioridade">
        <option value="5">5</option><option value="4">4</option><option value="3" selected>3</option>
      </select>
      <label>Dificuldade</label>
      <select id="dificuldade"><option>alta</option><option selected>mÃ©dia</option><option>baixa</option></select>
      <div class="row" style="margin-top:8px"><button id="btnAdd" class="primary">Adicionar</button></div>
    </div>
  </aside>
</div>

<script>
  // botÃ£o de atualizaÃ§Ã£o
  document.getElementById('btnRefresh').addEventListener('click', async () => {
    const btn = document.getElementById('btnRefresh');
    btn.innerText = 'â³ Atualizando...';
    btn.disabled = true;
    if ('caches' in window) {
      const keys = await caches.keys();
      await Promise.all(keys.map(k => caches.delete(k)));
    }
    if ('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      for (const reg of regs) await reg.unregister();
    }
    setTimeout(() => location.reload(true), 500);
  });
</script>
</body>
</html>
